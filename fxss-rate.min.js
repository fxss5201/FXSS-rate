jQuery,$.fn.rateDefaults={length:5,value:3.5,half:!0,decimal:!0,readonly:!0,text:!0,textList:["极差","差","中等","好","非常好"],theme:"#FFB800",size:"20px",gutter:"3px",selectClass:"fxss_rate_select",incompleteClass:"",customClass:"",validate:function(){var _this=this;this.value>this.length&&alert("value应小于等于length"),this.textList.length>this.length&&alert("textList.length应小于等于length")},init:function(initBox){for(var _this=this,rateBoxHtml="",rateHtml="",rateHtmlTpl='<div class="fxss_rate_wrapper '+_this.customClass+'"><div class="fxss_rate_box clearfix">{{rateHtmlTpl}}</div>{{textTpl}}</div>',rateItemStyle,rateSvgItemStyle,rateItemTpl='<div class="fxss_rate_item {{selectClass}}" style="'+(_this.theme?"color:"+_this.theme:"")+";"+(_this.gutter?"margin: 0 "+_this.gutter:"")+';"><svg class="icon" style="'+(_this.size?"font-size:"+_this.size:"")+';" aria-hidden="true"><use xlink:href="#{{svgHref}}"></use></svg></div>',valueObj=_this.countValue(),i=0;i<_this.length;i++)if(_this.decimal||_this.half)if(i<valueObj.int)rateHtml+=rateItemTpl.replace("{{selectClass}}",_this.selectClass).replace("{{svgHref}}","icon-stars-10");else if(i==valueObj.int){var index=0;_this.decimal?index=10*valueObj.float:_this.half&&(index=valueObj.float<.33?0:valueObj.float>.66?10:5),rateHtml+=rateItemTpl.replace("{{selectClass}}",_this.incompleteClass).replace("{{svgHref}}","icon-stars-"+index)}else rateHtml+=rateItemTpl.replace("{{selectClass}}","").replace("{{svgHref}}","icon-stars-0");else i<valueObj.int?rateHtml+=rateItemTpl.replace("{{selectClass}}",_this.selectClass).replace("{{svgHref}}","icon-stars-10"):rateHtml+=rateItemTpl.replace("{{selectClass}}","").replace("{{svgHref}}","icon-stars-0");rateBoxHtml=rateHtmlTpl.replace("{{rateHtmlTpl}}",rateHtml);var textStyle=(_this.theme?"color:"+_this.theme:"")+";"+(_this.size?"font-size:"+_this.size:"")+";";rateBoxHtml=_this.text?rateBoxHtml.replace("{{textTpl}}",'<div class="fxss_rate_text" style="'+textStyle+'">'+_this.countText()+"</div>"):rateBoxHtml.replace("{{textTpl}}",""),$(initBox).html(rateBoxHtml),_this.readonly||$(initBox).find(".fxss_rate_box").on("click",".fxss_rate_item",function(){var $this=$(this);if(_this.value==$this.index()+1)return!1;_this.value=$this.index()+1,_this.init(initBox);var object={id:$(initBox).attr("id"),index:$this.index()};_this.callback(object)})},countValue:function(){var _this=this,returnValue;return returnValue=this.value==parseInt(this.value)?{int:this.value,float:""}:{int:parseInt(this.value),float:(1e3*parseFloat(this.value)-1e3*parseInt(this.value))/1e3}},countText:function(){var _this=this,curFloat=this.value*this.textList.length/this.length,curRound=Math.round(curFloat),curIndex=0;return curIndex=curRound>0?curRound-1:curRound,(this.decimal||this.half)&&this.value>parseInt(this.value)&&this.value>(curRound?curRound*this.length/this.textList.length:this.length/this.textList.length)&&curIndex++,this.textList[curIndex]},callback:function(object){}},$.fn.rate=function(options){var options=$.extend({},$.fn.rateDefaults,options);return this.each(function(index,element){options.validate(),options.init(element)}),this};